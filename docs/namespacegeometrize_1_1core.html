<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geometrize: geometrize::core Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geometrize
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Portable C++ library for recreating images as sets of geometric primitives.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegeometrize.html">geometrize</a></li><li class="navelem"><a class="el" href="namespacegeometrize_1_1core.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">geometrize::core Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9b3c5f53664cf0a84fc1e789a24fd220"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgeometrize_1_1rgba.html">geometrize::rgba</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220">computeColor</a> (const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;current, const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a> &gt; &amp;lines, std::uint8_t alpha)</td></tr>
<tr class="memdesc:a9b3c5f53664cf0a84fc1e789a24fd220"><td class="mdescLeft">&#160;</td><td class="mdescRight">computeColor Calculates the color of the scanlines.  <a href="#a9b3c5f53664cf0a84fc1e789a24fd220">More...</a><br /></td></tr>
<tr class="separator:a9b3c5f53664cf0a84fc1e789a24fd220"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e0561199028ecc0b1e3ac56bf73d62d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#a9e0561199028ecc0b1e3ac56bf73d62d">differenceFull</a> (const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;first, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;second)</td></tr>
<tr class="memdesc:a9e0561199028ecc0b1e3ac56bf73d62d"><td class="mdescLeft">&#160;</td><td class="mdescRight">differenceFull Calculates the root-mean-square error between two bitmaps.  <a href="#a9e0561199028ecc0b1e3ac56bf73d62d">More...</a><br /></td></tr>
<tr class="separator:a9e0561199028ecc0b1e3ac56bf73d62d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a421d9870e9e49b517b60bce228659878"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#a421d9870e9e49b517b60bce228659878">differencePartial</a> (const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;before, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;after, float score, const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">Scanline</a> &gt; &amp;lines)</td></tr>
<tr class="memdesc:a421d9870e9e49b517b60bce228659878"><td class="mdescLeft">&#160;</td><td class="mdescRight">differencePartial Calculates the root-mean-square error between the parts of the two bitmaps within the scanline mask. This is for optimization purposes, it lets us calculate new error values only for parts of the image we know have changed.  <a href="#a421d9870e9e49b517b60bce228659878">More...</a><br /></td></tr>
<tr class="separator:a421d9870e9e49b517b60bce228659878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545e1243d4f337857ad65f39d0477cca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgeometrize_1_1_state.html">geometrize::State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#a545e1243d4f337857ad65f39d0477cca">bestRandomState</a> (const <a class="el" href="classgeometrize_1_1_model.html">geometrize::Model</a> &amp;model, const <a class="el" href="namespacegeometrize.html#a6834dba460401c64c4e0ccb01b916cef">geometrize::ShapeTypes</a> shapeTypes, std::uint32_t alpha, std::uint32_t n, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;current, <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;buffer, float lastScore)</td></tr>
<tr class="memdesc:a545e1243d4f337857ad65f39d0477cca"><td class="mdescLeft">&#160;</td><td class="mdescRight">bestRandomState Gets the best state using a random algorithm.  <a href="#a545e1243d4f337857ad65f39d0477cca">More...</a><br /></td></tr>
<tr class="separator:a545e1243d4f337857ad65f39d0477cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2f92c9b8315a53321df14fa3cf2d9a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgeometrize_1_1_state.html">geometrize::State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#ac2f92c9b8315a53321df14fa3cf2d9a9">hillClimb</a> (const <a class="el" href="classgeometrize_1_1_state.html">geometrize::State</a> &amp;state, std::uint32_t maxAge, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;current, <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;buffer, float lastScore)</td></tr>
<tr class="memdesc:ac2f92c9b8315a53321df14fa3cf2d9a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">hillClimb Hill climbing optimization algorithm, attempts to minimize energy (the error/difference).  <a href="#ac2f92c9b8315a53321df14fa3cf2d9a9">More...</a><br /></td></tr>
<tr class="separator:ac2f92c9b8315a53321df14fa3cf2d9a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54c591239a4618069f126dcc818db9f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgeometrize_1_1_state.html">geometrize::State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#a54c591239a4618069f126dcc818db9f3">bestHillClimbState</a> (const <a class="el" href="classgeometrize_1_1_model.html">geometrize::Model</a> &amp;model, <a class="el" href="namespacegeometrize.html#a6834dba460401c64c4e0ccb01b916cef">geometrize::ShapeTypes</a> shapeTypes, std::uint32_t alpha, std::uint32_t n, std::uint32_t age, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;current, <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;buffer, float lastScore)</td></tr>
<tr class="memdesc:a54c591239a4618069f126dcc818db9f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">bestHillClimbState Gets the best state using a hill climbing algorithm.  <a href="#a54c591239a4618069f126dcc818db9f3">More...</a><br /></td></tr>
<tr class="separator:a54c591239a4618069f126dcc818db9f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bbe866fe6ad978a443b4792f1353af1"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1">energy</a> (const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a> &gt; &amp;lines, std::uint32_t alpha, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;current, <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;buffer, float score)</td></tr>
<tr class="memdesc:a4bbe866fe6ad978a443b4792f1353af1"><td class="mdescLeft">&#160;</td><td class="mdescRight">energy Calculates a measure of the improvement adding the scanlines of a shape provides - lower energy is better.  <a href="#a4bbe866fe6ad978a443b4792f1353af1">More...</a><br /></td></tr>
<tr class="separator:a4bbe866fe6ad978a443b4792f1353af1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a54c591239a4618069f126dcc818db9f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54c591239a4618069f126dcc818db9f3">&sect;&nbsp;</a></span>bestHillClimbState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgeometrize_1_1_state.html">geometrize::State</a> geometrize::core::bestHillClimbState </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_model.html">geometrize::Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacegeometrize.html#a6834dba460401c64c4e0ccb01b916cef">geometrize::ShapeTypes</a>&#160;</td>
          <td class="paramname"><em>shapeTypes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>age</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>lastScore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>bestHillClimbState Gets the best state using a hill climbing algorithm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>The model to query for constraints etc. </td></tr>
    <tr><td class="paramname">shapeTypes</td><td>The types of shape to use. </td></tr>
    <tr><td class="paramname">alpha</td><td>The opacity of the shape. </td></tr>
    <tr><td class="paramname">n</td><td>The number of random states to generate. </td></tr>
    <tr><td class="paramname">age</td><td>The number of hillclimbing steps. </td></tr>
    <tr><td class="paramname">target</td><td>The target bitmap. </td></tr>
    <tr><td class="paramname">current</td><td>The current bitmap. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer bitmap. </td></tr>
    <tr><td class="paramname">lastScore</td><td>The last score. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The best state acquired from hill climbing i.e. the one with the lowest energy. </dd></dl>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keyword">const</span> <a class="code" href="classgeometrize_1_1_state.html">geometrize::State</a> state{<a class="code" href="namespacegeometrize_1_1core.html#a545e1243d4f337857ad65f39d0477cca">bestRandomState</a>(model, shapeTypes, alpha, n, target, current, buffer, lastScore)};</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacegeometrize_1_1core.html#ac2f92c9b8315a53321df14fa3cf2d9a9">hillClimb</a>(state, age, target, current, buffer, lastScore);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div><div class="ttc" id="namespacegeometrize_1_1core_html_ac2f92c9b8315a53321df14fa3cf2d9a9"><div class="ttname"><a href="namespacegeometrize_1_1core.html#ac2f92c9b8315a53321df14fa3cf2d9a9">geometrize::core::hillClimb</a></div><div class="ttdeci">geometrize::State hillClimb(const geometrize::State &amp;state, const std::uint32_t maxAge, const geometrize::Bitmap &amp;target, const geometrize::Bitmap &amp;current, geometrize::Bitmap &amp;buffer, const float lastScore)</div><div class="ttdoc">hillClimb Hill climbing optimization algorithm, attempts to minimize energy (the error/difference). </div><div class="ttdef"><b>Definition:</b> core.cpp:161</div></div>
<div class="ttc" id="namespacegeometrize_1_1core_html_a545e1243d4f337857ad65f39d0477cca"><div class="ttname"><a href="namespacegeometrize_1_1core.html#a545e1243d4f337857ad65f39d0477cca">geometrize::core::bestRandomState</a></div><div class="ttdeci">geometrize::State bestRandomState(const geometrize::Model &amp;model, const geometrize::ShapeTypes shapeTypes, const std::uint32_t alpha, const std::uint32_t n, const geometrize::Bitmap &amp;target, const geometrize::Bitmap &amp;current, geometrize::Bitmap &amp;buffer, const float lastScore)</div><div class="ttdoc">bestRandomState Gets the best state using a random algorithm. </div><div class="ttdef"><b>Definition:</b> core.cpp:135</div></div>
<div class="ttc" id="classgeometrize_1_1_state_html"><div class="ttname"><a href="classgeometrize_1_1_state.html">geometrize::State</a></div><div class="ttdoc">The State class relates a shape and related properties to a measure of how close it brings the workin...</div><div class="ttdef"><b>Definition:</b> state.h:22</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a54c591239a4618069f126dcc818db9f3_cgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a54c591239a4618069f126dcc818db9f3_cgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a54c591239a4618069f126dcc818db9f3_cgraph" id="namespacegeometrize_1_1core_a54c591239a4618069f126dcc818db9f3_cgraph">
<area shape="rect" id="node2" href="namespacegeometrize_1_1core.html#a545e1243d4f337857ad65f39d0477cca" title="bestRandomState Gets the best state using a random algorithm. " alt="" coords="224,100,424,141"/>
<area shape="rect" id="node16" href="namespacegeometrize_1_1core.html#ac2f92c9b8315a53321df14fa3cf2d9a9" title="hillClimb Hill climbing optimization algorithm, attempts to minimize energy (the error/difference). " alt="" coords="236,166,412,193"/>
<area shape="rect" id="node3" href="classgeometrize_1_1_state.html#a63ba05a7fc6449055e09f537828a47fe" title="Calculates a measure of the improvement drawing the primitive to the current bitmap will have..." alt="" coords="472,100,605,141"/>
<area shape="rect" id="node4" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1" title="energy Calculates a measure of the improvement adding the scanlines of a shape provides &#45; lower energ..." alt="" coords="653,107,820,134"/>
<area shape="rect" id="node5" href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220" title="computeColor Calculates the color of the scanlines. " alt="" coords="871,129,1048,171"/>
<area shape="rect" id="node10" href="namespacegeometrize.html#acb0746647a6799ff26ec1405ee927f78" title="copyLines Copies source pixels to a destination defined by a set of scanlines. " alt="" coords="883,27,1036,54"/>
<area shape="rect" id="node12" href="namespacegeometrize.html#a8235efcd62ef6bd0478d8fa9dd6df034" title="drawLines Draws scanlines onto an image. " alt="" coords="883,78,1035,105"/>
<area shape="rect" id="node13" href="namespacegeometrize_1_1core.html#a421d9870e9e49b517b60bce228659878" title="differencePartial Calculates the root&#45;mean&#45;square error between the parts of the two bitmaps within t..." alt="" coords="868,197,1051,239"/>
<area shape="rect" id="node6" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value. " alt="" coords="1112,71,1247,112"/>
<area shape="rect" id="node7" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a" title="clamp Clamps a value within a range. " alt="" coords="1099,136,1260,177"/>
<area shape="rect" id="node8" href="namespacegeometrize_1_1commonutil.html#a4bd394bcd9de4e09ef50947064dd9313" title="getAverageImageColor Computes the average RGB color of the pixels in the bitmap. " alt="" coords="1308,136,1469,177"/>
<area shape="rect" id="node9" href="classgeometrize_1_1_bitmap.html#a609d9019da733929eb9d2f707254c19a" title="getDataRef Gets a reference to the raw bitmap data. " alt="" coords="1517,136,1652,177"/>
<area shape="rect" id="node11" href="classgeometrize_1_1_bitmap.html#aa5b22e648397f07c4d7fa44b464d9f64" title="setPixel Sets a pixel color value. " alt="" coords="1112,5,1247,47"/>
<area shape="rect" id="node14" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55" title="getWidth Gets the width of the bitmap. " alt="" coords="1112,267,1247,308"/>
<area shape="rect" id="node15" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c" title="getHeight Gets the height of the bitmap. " alt="" coords="1112,201,1247,243"/>
<area shape="rect" id="node17" href="classgeometrize_1_1_state.html#a69cee4399c3599e6a6b3e9f039d3193b" title="mutate Modifies the current state in a random fashion. " alt="" coords="472,217,605,259"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a54c591239a4618069f126dcc818db9f3_icgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a54c591239a4618069f126dcc818db9f3_icgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a54c591239a4618069f126dcc818db9f3_icgraph" id="namespacegeometrize_1_1core_a54c591239a4618069f126dcc818db9f3_icgraph">
<area shape="rect" id="node2" href="classgeometrize_1_1_model_1_1_model_impl.html#ae1666701e21be2c2a7d4b57ebbc31fb4" title="geometrize::Model::\lModelImpl::getHillClimbState" alt="" coords="224,5,413,47"/>
<area shape="rect" id="node3" href="classgeometrize_1_1_model_1_1_model_impl.html#a1c443627e2c315681a081ad5114e0424" title="geometrize::Model::\lModelImpl::step" alt="" coords="461,5,599,47"/>
</map>
</div>

</div>
</div>
<a id="a545e1243d4f337857ad65f39d0477cca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a545e1243d4f337857ad65f39d0477cca">&sect;&nbsp;</a></span>bestRandomState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgeometrize_1_1_state.html">geometrize::State</a> geometrize::core::bestRandomState </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_model.html">geometrize::Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacegeometrize.html#a6834dba460401c64c4e0ccb01b916cef">geometrize::ShapeTypes</a>&#160;</td>
          <td class="paramname"><em>shapeTypes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>lastScore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>bestRandomState Gets the best state using a random algorithm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>The model to query for constraints etc. </td></tr>
    <tr><td class="paramname">shapeTypes</td><td>The types of shape to use. </td></tr>
    <tr><td class="paramname">alpha</td><td>The opacity of the shape. </td></tr>
    <tr><td class="paramname">n</td><td>The number of states to try. </td></tr>
    <tr><td class="paramname">target</td><td>The target bitmap. </td></tr>
    <tr><td class="paramname">current</td><td>The current bitmap. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer bitmap. </td></tr>
    <tr><td class="paramname">lastScore</td><td>The last score. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The best random state i.e. the one with the lowest energy. </dd></dl>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="classgeometrize_1_1_state.html">geometrize::State</a> bestState(model, shapeTypes, alpha);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">float</span> bestEnergy{bestState.calculateEnergy(target, current, buffer, lastScore)};</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">for</span>(std::uint32_t i = 0; i &lt;= n; i++) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="classgeometrize_1_1_state.html">geometrize::State</a> state(model, shapeTypes, alpha);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1">energy</a>{state.calculateEnergy(target, current, buffer, lastScore)};</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">if</span>(i == 0 || <a class="code" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1">energy</a> &lt; bestEnergy) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            bestEnergy = <a class="code" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1">energy</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            bestState = state;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> bestState;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div><div class="ttc" id="namespacegeometrize_1_1core_html_a4bbe866fe6ad978a443b4792f1353af1"><div class="ttname"><a href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1">geometrize::core::energy</a></div><div class="ttdeci">float energy(const std::vector&lt; geometrize::Scanline &gt; &amp;lines, const std::uint32_t alpha, const geometrize::Bitmap &amp;target, const geometrize::Bitmap &amp;current, geometrize::Bitmap &amp;buffer, const float score)</div><div class="ttdoc">energy Calculates a measure of the improvement adding the scanlines of a shape provides - lower energ...</div><div class="ttdef"><b>Definition:</b> core.cpp:205</div></div>
<div class="ttc" id="classgeometrize_1_1_state_html"><div class="ttname"><a href="classgeometrize_1_1_state.html">geometrize::State</a></div><div class="ttdoc">The State class relates a shape and related properties to a measure of how close it brings the workin...</div><div class="ttdef"><b>Definition:</b> state.h:22</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a545e1243d4f337857ad65f39d0477cca_cgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a545e1243d4f337857ad65f39d0477cca_cgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a545e1243d4f337857ad65f39d0477cca_cgraph" id="namespacegeometrize_1_1core_a545e1243d4f337857ad65f39d0477cca_cgraph">
<area shape="rect" id="node2" href="classgeometrize_1_1_state.html#a63ba05a7fc6449055e09f537828a47fe" title="Calculates a measure of the improvement drawing the primitive to the current bitmap will have..." alt="" coords="253,129,387,171"/>
<area shape="rect" id="node3" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1" title="energy Calculates a measure of the improvement adding the scanlines of a shape provides &#45; lower energ..." alt="" coords="435,107,601,134"/>
<area shape="rect" id="node4" href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220" title="computeColor Calculates the color of the scanlines. " alt="" coords="652,129,829,171"/>
<area shape="rect" id="node9" href="namespacegeometrize.html#acb0746647a6799ff26ec1405ee927f78" title="copyLines Copies source pixels to a destination defined by a set of scanlines. " alt="" coords="664,27,817,54"/>
<area shape="rect" id="node11" href="namespacegeometrize.html#a8235efcd62ef6bd0478d8fa9dd6df034" title="drawLines Draws scanlines onto an image. " alt="" coords="665,78,817,105"/>
<area shape="rect" id="node12" href="namespacegeometrize_1_1core.html#a421d9870e9e49b517b60bce228659878" title="differencePartial Calculates the root&#45;mean&#45;square error between the parts of the two bitmaps within t..." alt="" coords="649,197,832,239"/>
<area shape="rect" id="node5" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value. " alt="" coords="893,71,1028,112"/>
<area shape="rect" id="node6" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a" title="clamp Clamps a value within a range. " alt="" coords="880,136,1041,177"/>
<area shape="rect" id="node7" href="namespacegeometrize_1_1commonutil.html#a4bd394bcd9de4e09ef50947064dd9313" title="getAverageImageColor Computes the average RGB color of the pixels in the bitmap. " alt="" coords="1089,136,1251,177"/>
<area shape="rect" id="node8" href="classgeometrize_1_1_bitmap.html#a609d9019da733929eb9d2f707254c19a" title="getDataRef Gets a reference to the raw bitmap data. " alt="" coords="1299,136,1433,177"/>
<area shape="rect" id="node10" href="classgeometrize_1_1_bitmap.html#aa5b22e648397f07c4d7fa44b464d9f64" title="setPixel Sets a pixel color value. " alt="" coords="893,5,1028,47"/>
<area shape="rect" id="node13" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55" title="getWidth Gets the width of the bitmap. " alt="" coords="893,267,1028,308"/>
<area shape="rect" id="node14" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c" title="getHeight Gets the height of the bitmap. " alt="" coords="893,201,1028,243"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a545e1243d4f337857ad65f39d0477cca_icgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a545e1243d4f337857ad65f39d0477cca_icgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a545e1243d4f337857ad65f39d0477cca_icgraph" id="namespacegeometrize_1_1core_a545e1243d4f337857ad65f39d0477cca_icgraph">
<area shape="rect" id="node2" href="namespacegeometrize_1_1core.html#a54c591239a4618069f126dcc818db9f3" title="bestHillClimbState Gets the best state using a hill climbing algorithm. " alt="" coords="253,5,424,47"/>
<area shape="rect" id="node3" href="classgeometrize_1_1_model_1_1_model_impl.html#ae1666701e21be2c2a7d4b57ebbc31fb4" title="geometrize::Model::\lModelImpl::getHillClimbState" alt="" coords="472,5,661,47"/>
<area shape="rect" id="node4" href="classgeometrize_1_1_model_1_1_model_impl.html#a1c443627e2c315681a081ad5114e0424" title="geometrize::Model::\lModelImpl::step" alt="" coords="709,5,847,47"/>
</map>
</div>

</div>
</div>
<a id="a9b3c5f53664cf0a84fc1e789a24fd220"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b3c5f53664cf0a84fc1e789a24fd220">&sect;&nbsp;</a></span>computeColor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> geometrize::core::computeColor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint8_t&#160;</td>
          <td class="paramname"><em>alpha</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>computeColor Calculates the color of the scanlines. </p>
<p>The core functions for Geometrize. </p><dl class="section author"><dt>Author</dt><dd>Sam Twidale (<a href="http://samcodes.co.uk/">http://samcodes.co.uk/</a>) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target image. </td></tr>
    <tr><td class="paramname">current</td><td>The current image. </td></tr>
    <tr><td class="paramname">lines</td><td>The scanlines. </td></tr>
    <tr><td class="paramname">alpha</td><td>The alpha of the scanline. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The color of the scanlines. </dd></dl>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    std::int64_t totalRed{0};</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    std::int64_t totalGreen{0};</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    std::int64_t totalBlue{0};</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    std::int64_t count{0};</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keyword">const</span> std::int32_t a{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(257.0f * 255.0f / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(alpha))};</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">// For each scanline</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a>&amp; line : lines) {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <span class="keyword">const</span> std::int32_t y{line.y};</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keywordflow">for</span>(std::int32_t x = line.x1; x &lt;= line.x2; x++) {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            <span class="comment">// Get the overlapping target and current colors</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <span class="keyword">const</span> <a class="code" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> t{target.<a class="code" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y)};</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            <span class="keyword">const</span> <a class="code" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> c{current.<a class="code" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y)};</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            <span class="keyword">const</span> std::int32_t tr{t.<a class="code" href="structgeometrize_1_1rgba.html#a1f84c6be7fbc86676ff8d05c22dfa324">r</a>};</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            <span class="keyword">const</span> std::int32_t tg{t.g};</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            <span class="keyword">const</span> std::int32_t tb{t.b};</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            <span class="keyword">const</span> std::int32_t cr{c.r};</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            <span class="keyword">const</span> std::int32_t cg{c.g};</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <span class="keyword">const</span> std::int32_t cb{c.b};</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            <span class="comment">// Mix the red, green and blue components, blending by the given alpha value</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            totalRed += <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>((tr - cr) * a + cr * 257);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            totalGreen += <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>((tg - cg) * a + cg * 257);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            totalBlue += <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>((tb - cb) * a + cb * 257);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            count++;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    }</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">// Early out to avoid integer divide by 0</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span>(count == 0) {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structgeometrize_1_1rgba.html">geometrize::rgba</a>{0, 0, 0, 0};</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keyword">const</span> std::int32_t rr{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(totalRed / count) &gt;&gt; 8};</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keyword">const</span> std::int32_t gg{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(totalGreen / count) &gt;&gt; 8};</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">const</span> std::int32_t bb{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(totalBlue / count) &gt;&gt; 8};</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// Scale totals down to 0-255 range and return average blended color</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">const</span> std::uint8_t r{<span class="keyword">static_cast&lt;</span>std::uint8_t<span class="keyword">&gt;</span>(<a class="code" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a">commonutil::clamp</a>(rr, INT32_C(0), INT32_C(255)))};</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">const</span> std::uint8_t g{<span class="keyword">static_cast&lt;</span>std::uint8_t<span class="keyword">&gt;</span>(<a class="code" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a">commonutil::clamp</a>(gg, INT32_C(0), INT32_C(255)))};</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keyword">const</span> std::uint8_t b{<span class="keyword">static_cast&lt;</span>std::uint8_t<span class="keyword">&gt;</span>(<a class="code" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a">commonutil::clamp</a>(bb, INT32_C(0), INT32_C(255)))};</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structgeometrize_1_1rgba.html">geometrize::rgba</a>{r, g, b, alpha};</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div><div class="ttc" id="classgeometrize_1_1_scanline_html"><div class="ttname"><a href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a></div><div class="ttdoc">The Scanline class represents a scanline, a row of pixels running across a bitmap. </div><div class="ttdef"><b>Definition:</b> scanline.h:13</div></div>
<div class="ttc" id="namespacegeometrize_1_1commonutil_html_a31e1f80ca7a55bd9b85dd8c7e8d4196a"><div class="ttname"><a href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a">geometrize::commonutil::clamp</a></div><div class="ttdeci">T clamp(const T &amp;value, const T &amp;lower, const T &amp;upper)</div><div class="ttdoc">clamp Clamps a value within a range. </div><div class="ttdef"><b>Definition:</b> commonutil.h:42</div></div>
<div class="ttc" id="structgeometrize_1_1rgba_html_a1f84c6be7fbc86676ff8d05c22dfa324"><div class="ttname"><a href="structgeometrize_1_1rgba.html#a1f84c6be7fbc86676ff8d05c22dfa324">geometrize::rgba::r</a></div><div class="ttdeci">std::uint8_t r</div><div class="ttdef"><b>Definition:</b> rgba.h:14</div></div>
<div class="ttc" id="structgeometrize_1_1rgba_html"><div class="ttname"><a href="structgeometrize_1_1rgba.html">geometrize::rgba</a></div><div class="ttdoc">The rgba struct is a helper for manipulating RGBA8888 color data. </div><div class="ttdef"><b>Definition:</b> rgba.h:12</div></div>
<div class="ttc" id="classgeometrize_1_1_bitmap_html_ac79681e7353058d37a677b2c3e488d0c"><div class="ttname"><a href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">geometrize::Bitmap::getPixel</a></div><div class="ttdeci">geometrize::rgba getPixel(std::uint32_t x, std::uint32_t y) const</div><div class="ttdoc">getPixel Gets a pixel color value. </div><div class="ttdef"><b>Definition:</b> bitmap.cpp:40</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_cgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_cgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_cgraph" id="namespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_cgraph">
<area shape="rect" id="node2" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value. " alt="" coords="244,5,379,47"/>
<area shape="rect" id="node3" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a" title="clamp Clamps a value within a range. " alt="" coords="231,71,392,112"/>
<area shape="rect" id="node4" href="namespacegeometrize_1_1commonutil.html#a4bd394bcd9de4e09ef50947064dd9313" title="getAverageImageColor Computes the average RGB color of the pixels in the bitmap. " alt="" coords="440,71,601,112"/>
<area shape="rect" id="node5" href="classgeometrize_1_1_bitmap.html#a609d9019da733929eb9d2f707254c19a" title="getDataRef Gets a reference to the raw bitmap data. " alt="" coords="649,71,784,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_icgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_icgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_icgraph" id="namespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_icgraph">
<area shape="rect" id="node2" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1" title="energy Calculates a measure of the improvement adding the scanlines of a shape provides &#45; lower energ..." alt="" coords="231,63,397,90"/>
<area shape="rect" id="node9" href="classgeometrize_1_1_model_1_1_model_impl.html#a53408e2e0e6a4582a162b88183a106aa" title="geometrize::Model::\lModelImpl::drawShape" alt="" coords="445,144,599,185"/>
<area shape="rect" id="node3" href="namespacegeometrize_1_1core.html#a545e1243d4f337857ad65f39d0477cca" title="bestRandomState Gets the best state using a random algorithm. " alt="" coords="647,27,847,68"/>
<area shape="rect" id="node7" href="namespacegeometrize_1_1core.html#ac2f92c9b8315a53321df14fa3cf2d9a9" title="hillClimb Hill climbing optimization algorithm, attempts to minimize energy (the error/difference). " alt="" coords="659,93,835,119"/>
<area shape="rect" id="node8" href="classgeometrize_1_1_state.html#a63ba05a7fc6449055e09f537828a47fe" title="Calculates a measure of the improvement drawing the primitive to the current bitmap will have..." alt="" coords="455,27,589,68"/>
<area shape="rect" id="node4" href="namespacegeometrize_1_1core.html#a54c591239a4618069f126dcc818db9f3" title="bestHillClimbState Gets the best state using a hill climbing algorithm. " alt="" coords="895,85,1065,127"/>
<area shape="rect" id="node5" href="classgeometrize_1_1_model_1_1_model_impl.html#ae1666701e21be2c2a7d4b57ebbc31fb4" title="geometrize::Model::\lModelImpl::getHillClimbState" alt="" coords="1113,85,1303,127"/>
<area shape="rect" id="node6" href="classgeometrize_1_1_model_1_1_model_impl.html#a1c443627e2c315681a081ad5114e0424" title="geometrize::Model::\lModelImpl::step" alt="" coords="1351,115,1488,156"/>
</map>
</div>

</div>
</div>
<a id="a9e0561199028ecc0b1e3ac56bf73d62d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e0561199028ecc0b1e3ac56bf73d62d">&sect;&nbsp;</a></span>differenceFull()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float geometrize::core::differenceFull </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>second</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>differenceFull Calculates the root-mean-square error between two bitmaps. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">first</td><td>The first bitmap. </td></tr>
    <tr><td class="paramname">second</td><td>The second bitmap. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The difference/error measure between the two bitmaps. </dd></dl>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    assert(first.<a class="code" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">getWidth</a>() == second.<a class="code" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">getWidth</a>());</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    assert(first.<a class="code" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">getHeight</a>() == second.<a class="code" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">getHeight</a>());</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">const</span> std::size_t width{first.<a class="code" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">getWidth</a>()};</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keyword">const</span> std::size_t height{first.<a class="code" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">getHeight</a>()};</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    std::uint64_t total{0};</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">for</span>(std::uint32_t y = 0; y &lt; height; y++) {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">for</span>(std::uint32_t x = 0; x &lt; width; x++) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keyword">const</span> <a class="code" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> f{first.<a class="code" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y)};</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="keyword">const</span> <a class="code" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> s{second.<a class="code" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y)};</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keyword">const</span> std::int32_t dr = {f.<a class="code" href="structgeometrize_1_1rgba.html#a1f84c6be7fbc86676ff8d05c22dfa324">r</a> - s.r};</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="keyword">const</span> std::int32_t dg = {f.g - s.g};</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keyword">const</span> std::int32_t db = {f.b - s.b};</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keyword">const</span> std::int32_t da = {f.a - s.a};</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            total += (dr * dr + dg * dg + db * db + da * da);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">return</span> std::sqrt(static_cast&lt;float&gt;(total) / (static_cast&lt;float&gt;(width) * static_cast&lt;float&gt;(height) * 4.0f)) / 255.0f;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div><div class="ttc" id="classgeometrize_1_1_bitmap_html_a870373372ffd3c860063d7bf76607d55"><div class="ttname"><a href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">geometrize::Bitmap::getWidth</a></div><div class="ttdeci">std::uint32_t getWidth() const</div><div class="ttdoc">getWidth Gets the width of the bitmap. </div><div class="ttdef"><b>Definition:</b> bitmap.cpp:20</div></div>
<div class="ttc" id="structgeometrize_1_1rgba_html_a1f84c6be7fbc86676ff8d05c22dfa324"><div class="ttname"><a href="structgeometrize_1_1rgba.html#a1f84c6be7fbc86676ff8d05c22dfa324">geometrize::rgba::r</a></div><div class="ttdeci">std::uint8_t r</div><div class="ttdef"><b>Definition:</b> rgba.h:14</div></div>
<div class="ttc" id="structgeometrize_1_1rgba_html"><div class="ttname"><a href="structgeometrize_1_1rgba.html">geometrize::rgba</a></div><div class="ttdoc">The rgba struct is a helper for manipulating RGBA8888 color data. </div><div class="ttdef"><b>Definition:</b> rgba.h:12</div></div>
<div class="ttc" id="classgeometrize_1_1_bitmap_html_ac79681e7353058d37a677b2c3e488d0c"><div class="ttname"><a href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">geometrize::Bitmap::getPixel</a></div><div class="ttdeci">geometrize::rgba getPixel(std::uint32_t x, std::uint32_t y) const</div><div class="ttdoc">getPixel Gets a pixel color value. </div><div class="ttdef"><b>Definition:</b> bitmap.cpp:40</div></div>
<div class="ttc" id="classgeometrize_1_1_bitmap_html_a1fb235e2f98d3b1bffc417a8761a3e4c"><div class="ttname"><a href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">geometrize::Bitmap::getHeight</a></div><div class="ttdeci">std::uint32_t getHeight() const</div><div class="ttdoc">getHeight Gets the height of the bitmap. </div><div class="ttdef"><b>Definition:</b> bitmap.cpp:25</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a9e0561199028ecc0b1e3ac56bf73d62d_cgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a9e0561199028ecc0b1e3ac56bf73d62d_cgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a9e0561199028ecc0b1e3ac56bf73d62d_cgraph" id="namespacegeometrize_1_1core_a9e0561199028ecc0b1e3ac56bf73d62d_cgraph">
<area shape="rect" id="node2" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55" title="getWidth Gets the width of the bitmap. " alt="" coords="256,5,391,47"/>
<area shape="rect" id="node3" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c" title="getHeight Gets the height of the bitmap. " alt="" coords="256,71,391,112"/>
<area shape="rect" id="node4" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value. " alt="" coords="256,136,391,177"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a9e0561199028ecc0b1e3ac56bf73d62d_icgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a9e0561199028ecc0b1e3ac56bf73d62d_icgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a9e0561199028ecc0b1e3ac56bf73d62d_icgraph" id="namespacegeometrize_1_1core_a9e0561199028ecc0b1e3ac56bf73d62d_icgraph">
<area shape="rect" id="node2" href="classgeometrize_1_1_model_1_1_model_impl.html#a8cb72039827a0f6608152155c536fc10" title="geometrize::Model::\lModelImpl::ModelImpl" alt="" coords="256,5,404,47"/>
<area shape="rect" id="node4" href="classgeometrize_1_1_model_1_1_model_impl.html#a67a5f35db45bfc0e29b481baa87dcf14" title="geometrize::Model::\lModelImpl::reset" alt="" coords="261,71,399,112"/>
<area shape="rect" id="node3" href="classgeometrize_1_1_model_1_1_model_impl.html#ad767b6b1cd87a874014eb2c3fad20690" title="geometrize::Model::\lModelImpl::ModelImpl" alt="" coords="452,5,600,47"/>
</map>
</div>

</div>
</div>
<a id="a421d9870e9e49b517b60bce228659878"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a421d9870e9e49b517b60bce228659878">&sect;&nbsp;</a></span>differencePartial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float geometrize::core::differencePartial </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>before</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>after</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">Scanline</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lines</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>differencePartial Calculates the root-mean-square error between the parts of the two bitmaps within the scanline mask. This is for optimization purposes, it lets us calculate new error values only for parts of the image we know have changed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target bitmap. </td></tr>
    <tr><td class="paramname">before</td><td>The bitmap before the change. </td></tr>
    <tr><td class="paramname">after</td><td>The bitmap after the change. </td></tr>
    <tr><td class="paramname">score</td><td>The score. </td></tr>
    <tr><td class="paramname">lines</td><td>The scanlines. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The difference/error between the two bitmaps, masked by the scanlines. </dd></dl>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keyword">const</span> std::size_t width{target.<a class="code" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">getWidth</a>()};</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">const</span> std::size_t height{target.<a class="code" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">getHeight</a>()};</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">const</span> std::size_t rgbaCount{width * height * 4};</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// TODO this can underflow in some cases when the image is small</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    std::uint64_t total{<span class="keyword">static_cast&lt;</span>std::uint64_t<span class="keyword">&gt;</span>(std::pow(score * 255.0f, 2) * rgbaCount)};</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a>&amp; line : lines) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keyword">const</span> std::int32_t y{line.y};</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">for</span>(std::int32_t x = line.x1; x &lt;= line.x2; x++) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keyword">const</span> <a class="code" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> t{target.<a class="code" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y)};</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keyword">const</span> <a class="code" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> b{before.<a class="code" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y)};</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keyword">const</span> <a class="code" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> a{after.<a class="code" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y)};</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keyword">const</span> std::int32_t dtbr{t.<a class="code" href="structgeometrize_1_1rgba.html#a1f84c6be7fbc86676ff8d05c22dfa324">r</a> - b.r};</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keyword">const</span> std::int32_t dtbg{t.g - b.g};</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keyword">const</span> std::int32_t dtbb{t.b - b.b};</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keyword">const</span> std::int32_t dtba{t.a - b.a};</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keyword">const</span> std::int32_t dtar{t.r - a.r};</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="keyword">const</span> std::int32_t dtag{t.g - a.g};</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keyword">const</span> std::int32_t dtab{t.b - a.b};</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keyword">const</span> std::int32_t dtaa{t.a - a.a};</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            total -= (dtbr * dtbr + dtbg * dtbg + dtbb * dtbb + dtba * dtba);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            total += (dtar * dtar + dtag * dtag + dtab * dtab + dtaa * dtaa);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> std::sqrt(static_cast&lt;float&gt;(total) / static_cast&lt;float&gt;(rgbaCount)) / 255.0f;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div><div class="ttc" id="classgeometrize_1_1_bitmap_html_a870373372ffd3c860063d7bf76607d55"><div class="ttname"><a href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">geometrize::Bitmap::getWidth</a></div><div class="ttdeci">std::uint32_t getWidth() const</div><div class="ttdoc">getWidth Gets the width of the bitmap. </div><div class="ttdef"><b>Definition:</b> bitmap.cpp:20</div></div>
<div class="ttc" id="classgeometrize_1_1_scanline_html"><div class="ttname"><a href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a></div><div class="ttdoc">The Scanline class represents a scanline, a row of pixels running across a bitmap. </div><div class="ttdef"><b>Definition:</b> scanline.h:13</div></div>
<div class="ttc" id="structgeometrize_1_1rgba_html_a1f84c6be7fbc86676ff8d05c22dfa324"><div class="ttname"><a href="structgeometrize_1_1rgba.html#a1f84c6be7fbc86676ff8d05c22dfa324">geometrize::rgba::r</a></div><div class="ttdeci">std::uint8_t r</div><div class="ttdef"><b>Definition:</b> rgba.h:14</div></div>
<div class="ttc" id="structgeometrize_1_1rgba_html"><div class="ttname"><a href="structgeometrize_1_1rgba.html">geometrize::rgba</a></div><div class="ttdoc">The rgba struct is a helper for manipulating RGBA8888 color data. </div><div class="ttdef"><b>Definition:</b> rgba.h:12</div></div>
<div class="ttc" id="classgeometrize_1_1_bitmap_html_ac79681e7353058d37a677b2c3e488d0c"><div class="ttname"><a href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">geometrize::Bitmap::getPixel</a></div><div class="ttdeci">geometrize::rgba getPixel(std::uint32_t x, std::uint32_t y) const</div><div class="ttdoc">getPixel Gets a pixel color value. </div><div class="ttdef"><b>Definition:</b> bitmap.cpp:40</div></div>
<div class="ttc" id="classgeometrize_1_1_bitmap_html_a1fb235e2f98d3b1bffc417a8761a3e4c"><div class="ttname"><a href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">geometrize::Bitmap::getHeight</a></div><div class="ttdeci">std::uint32_t getHeight() const</div><div class="ttdoc">getHeight Gets the height of the bitmap. </div><div class="ttdef"><b>Definition:</b> bitmap.cpp:25</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a421d9870e9e49b517b60bce228659878_cgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a421d9870e9e49b517b60bce228659878_cgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a421d9870e9e49b517b60bce228659878_cgraph" id="namespacegeometrize_1_1core_a421d9870e9e49b517b60bce228659878_cgraph">
<area shape="rect" id="node2" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55" title="getWidth Gets the width of the bitmap. " alt="" coords="236,5,371,47"/>
<area shape="rect" id="node3" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c" title="getHeight Gets the height of the bitmap. " alt="" coords="236,71,371,112"/>
<area shape="rect" id="node4" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value. " alt="" coords="236,136,371,177"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a421d9870e9e49b517b60bce228659878_icgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a421d9870e9e49b517b60bce228659878_icgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a421d9870e9e49b517b60bce228659878_icgraph" id="namespacegeometrize_1_1core_a421d9870e9e49b517b60bce228659878_icgraph">
<area shape="rect" id="node2" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1" title="energy Calculates a measure of the improvement adding the scanlines of a shape provides &#45; lower energ..." alt="" coords="236,63,403,90"/>
<area shape="rect" id="node9" href="classgeometrize_1_1_model_1_1_model_impl.html#a53408e2e0e6a4582a162b88183a106aa" title="geometrize::Model::\lModelImpl::drawShape" alt="" coords="451,144,604,185"/>
<area shape="rect" id="node3" href="namespacegeometrize_1_1core.html#a545e1243d4f337857ad65f39d0477cca" title="bestRandomState Gets the best state using a random algorithm. " alt="" coords="652,27,852,68"/>
<area shape="rect" id="node7" href="namespacegeometrize_1_1core.html#ac2f92c9b8315a53321df14fa3cf2d9a9" title="hillClimb Hill climbing optimization algorithm, attempts to minimize energy (the error/difference). " alt="" coords="664,93,840,119"/>
<area shape="rect" id="node8" href="classgeometrize_1_1_state.html#a63ba05a7fc6449055e09f537828a47fe" title="Calculates a measure of the improvement drawing the primitive to the current bitmap will have..." alt="" coords="461,27,594,68"/>
<area shape="rect" id="node4" href="namespacegeometrize_1_1core.html#a54c591239a4618069f126dcc818db9f3" title="bestHillClimbState Gets the best state using a hill climbing algorithm. " alt="" coords="900,85,1071,127"/>
<area shape="rect" id="node5" href="classgeometrize_1_1_model_1_1_model_impl.html#ae1666701e21be2c2a7d4b57ebbc31fb4" title="geometrize::Model::\lModelImpl::getHillClimbState" alt="" coords="1119,85,1308,127"/>
<area shape="rect" id="node6" href="classgeometrize_1_1_model_1_1_model_impl.html#a1c443627e2c315681a081ad5114e0424" title="geometrize::Model::\lModelImpl::step" alt="" coords="1356,115,1493,156"/>
</map>
</div>

</div>
</div>
<a id="a4bbe866fe6ad978a443b4792f1353af1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bbe866fe6ad978a443b4792f1353af1">&sect;&nbsp;</a></span>energy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float geometrize::core::energy </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>energy Calculates a measure of the improvement adding the scanlines of a shape provides - lower energy is better. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lines</td><td>The scanlines of the shape. </td></tr>
    <tr><td class="paramname">alpha</td><td>The alpha of the scanlines. </td></tr>
    <tr><td class="paramname">target</td><td>The target bitmap. </td></tr>
    <tr><td class="paramname">current</td><td>The current bitmap. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer bitmap. </td></tr>
    <tr><td class="paramname">score</td><td>The score. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The energy measure. </dd></dl>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">const</span> <a class="code" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> color{<a class="code" href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220">computeColor</a>(target, current, lines, alpha)}; <span class="comment">// Calculate best color for areas covered by the scanlines</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="namespacegeometrize.html#acb0746647a6799ff26ec1405ee927f78">geometrize::copyLines</a>(buffer, current, lines); <span class="comment">// Copy area covered by scanlines to buffer bitmap</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="namespacegeometrize.html#a8235efcd62ef6bd0478d8fa9dd6df034">geometrize::drawLines</a>(buffer, color, lines); <span class="comment">// Blend scanlines into the buffer using the color calculated earlier</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacegeometrize_1_1core.html#a421d9870e9e49b517b60bce228659878">differencePartial</a>(target, current, buffer, score, lines); <span class="comment">// Get error measure between areas of current and modified buffers covered by scanlines</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div><div class="ttc" id="namespacegeometrize_html_acb0746647a6799ff26ec1405ee927f78"><div class="ttname"><a href="namespacegeometrize.html#acb0746647a6799ff26ec1405ee927f78">geometrize::copyLines</a></div><div class="ttdeci">void copyLines(geometrize::Bitmap &amp;destination, const geometrize::Bitmap &amp;source, const std::vector&lt; geometrize::Scanline &gt; &amp;lines)</div><div class="ttdoc">copyLines Copies source pixels to a destination defined by a set of scanlines. </div><div class="ttdef"><b>Definition:</b> rasterizer.cpp:51</div></div>
<div class="ttc" id="namespacegeometrize_html_a8235efcd62ef6bd0478d8fa9dd6df034"><div class="ttname"><a href="namespacegeometrize.html#a8235efcd62ef6bd0478d8fa9dd6df034">geometrize::drawLines</a></div><div class="ttdeci">void drawLines(geometrize::Bitmap &amp;image, const geometrize::rgba color, const std::vector&lt; geometrize::Scanline &gt; &amp;lines)</div><div class="ttdoc">drawLines Draws scanlines onto an image. </div><div class="ttdef"><b>Definition:</b> rasterizer.cpp:13</div></div>
<div class="ttc" id="namespacegeometrize_1_1core_html_a9b3c5f53664cf0a84fc1e789a24fd220"><div class="ttname"><a href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220">geometrize::core::computeColor</a></div><div class="ttdeci">geometrize::rgba computeColor(const geometrize::Bitmap &amp;target, const geometrize::Bitmap &amp;current, const std::vector&lt; geometrize::Scanline &gt; &amp;lines, const std::uint8_t alpha)</div><div class="ttdoc">computeColor Calculates the color of the scanlines. </div><div class="ttdef"><b>Definition:</b> core.cpp:22</div></div>
<div class="ttc" id="namespacegeometrize_1_1core_html_a421d9870e9e49b517b60bce228659878"><div class="ttname"><a href="namespacegeometrize_1_1core.html#a421d9870e9e49b517b60bce228659878">geometrize::core::differencePartial</a></div><div class="ttdeci">float differencePartial(const geometrize::Bitmap &amp;target, const geometrize::Bitmap &amp;before, const geometrize::Bitmap &amp;after, const float score, const std::vector&lt; Scanline &gt; &amp;lines)</div><div class="ttdoc">differencePartial Calculates the root-mean-square error between the parts of the two bitmaps within t...</div><div class="ttdef"><b>Definition:</b> core.cpp:98</div></div>
<div class="ttc" id="structgeometrize_1_1rgba_html"><div class="ttname"><a href="structgeometrize_1_1rgba.html">geometrize::rgba</a></div><div class="ttdoc">The rgba struct is a helper for manipulating RGBA8888 color data. </div><div class="ttdef"><b>Definition:</b> rgba.h:12</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a4bbe866fe6ad978a443b4792f1353af1_cgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a4bbe866fe6ad978a443b4792f1353af1_cgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a4bbe866fe6ad978a443b4792f1353af1_cgraph" id="namespacegeometrize_1_1core_a4bbe866fe6ad978a443b4792f1353af1_cgraph">
<area shape="rect" id="node2" href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220" title="computeColor Calculates the color of the scanlines. " alt="" coords="223,129,400,171"/>
<area shape="rect" id="node7" href="namespacegeometrize.html#acb0746647a6799ff26ec1405ee927f78" title="copyLines Copies source pixels to a destination defined by a set of scanlines. " alt="" coords="235,27,388,54"/>
<area shape="rect" id="node9" href="namespacegeometrize.html#a8235efcd62ef6bd0478d8fa9dd6df034" title="drawLines Draws scanlines onto an image. " alt="" coords="235,78,387,105"/>
<area shape="rect" id="node10" href="namespacegeometrize_1_1core.html#a421d9870e9e49b517b60bce228659878" title="differencePartial Calculates the root&#45;mean&#45;square error between the parts of the two bitmaps within t..." alt="" coords="220,197,403,239"/>
<area shape="rect" id="node3" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value. " alt="" coords="464,71,599,112"/>
<area shape="rect" id="node4" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a" title="clamp Clamps a value within a range. " alt="" coords="451,136,612,177"/>
<area shape="rect" id="node5" href="namespacegeometrize_1_1commonutil.html#a4bd394bcd9de4e09ef50947064dd9313" title="getAverageImageColor Computes the average RGB color of the pixels in the bitmap. " alt="" coords="660,136,821,177"/>
<area shape="rect" id="node6" href="classgeometrize_1_1_bitmap.html#a609d9019da733929eb9d2f707254c19a" title="getDataRef Gets a reference to the raw bitmap data. " alt="" coords="869,136,1004,177"/>
<area shape="rect" id="node8" href="classgeometrize_1_1_bitmap.html#aa5b22e648397f07c4d7fa44b464d9f64" title="setPixel Sets a pixel color value. " alt="" coords="464,5,599,47"/>
<area shape="rect" id="node11" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55" title="getWidth Gets the width of the bitmap. " alt="" coords="464,267,599,308"/>
<area shape="rect" id="node12" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c" title="getHeight Gets the height of the bitmap. " alt="" coords="464,201,599,243"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a4bbe866fe6ad978a443b4792f1353af1_icgraph.png" border="0" usemap="#namespacegeometrize_1_1core_a4bbe866fe6ad978a443b4792f1353af1_icgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_a4bbe866fe6ad978a443b4792f1353af1_icgraph" id="namespacegeometrize_1_1core_a4bbe866fe6ad978a443b4792f1353af1_icgraph">
<area shape="rect" id="node2" href="namespacegeometrize_1_1core.html#a545e1243d4f337857ad65f39d0477cca" title="bestRandomState Gets the best state using a random algorithm. " alt="" coords="401,5,601,47"/>
<area shape="rect" id="node6" href="namespacegeometrize_1_1core.html#ac2f92c9b8315a53321df14fa3cf2d9a9" title="hillClimb Hill climbing optimization algorithm, attempts to minimize energy (the error/difference). " alt="" coords="413,71,589,98"/>
<area shape="rect" id="node7" href="classgeometrize_1_1_state.html#a63ba05a7fc6449055e09f537828a47fe" title="Calculates a measure of the improvement drawing the primitive to the current bitmap will have..." alt="" coords="220,35,353,76"/>
<area shape="rect" id="node3" href="namespacegeometrize_1_1core.html#a54c591239a4618069f126dcc818db9f3" title="bestHillClimbState Gets the best state using a hill climbing algorithm. " alt="" coords="649,35,820,76"/>
<area shape="rect" id="node4" href="classgeometrize_1_1_model_1_1_model_impl.html#ae1666701e21be2c2a7d4b57ebbc31fb4" title="geometrize::Model::\lModelImpl::getHillClimbState" alt="" coords="868,35,1057,76"/>
<area shape="rect" id="node5" href="classgeometrize_1_1_model_1_1_model_impl.html#a1c443627e2c315681a081ad5114e0424" title="geometrize::Model::\lModelImpl::step" alt="" coords="1105,35,1243,76"/>
</map>
</div>

</div>
</div>
<a id="ac2f92c9b8315a53321df14fa3cf2d9a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2f92c9b8315a53321df14fa3cf2d9a9">&sect;&nbsp;</a></span>hillClimb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgeometrize_1_1_state.html">geometrize::State</a> geometrize::core::hillClimb </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_state.html">geometrize::State</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>maxAge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>lastScore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>hillClimb Hill climbing optimization algorithm, attempts to minimize energy (the error/difference). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>The state to optimize. </td></tr>
    <tr><td class="paramname">maxAge</td><td>The maximum age. </td></tr>
    <tr><td class="paramname">target</td><td>The target bitmap. </td></tr>
    <tr><td class="paramname">current</td><td>The current bitmap. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer bitmap. </td></tr>
    <tr><td class="paramname">lastScore</td><td>The last score. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The best state found from hillclimbing. </dd></dl>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="classgeometrize_1_1_state.html">geometrize::State</a> s(state);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="classgeometrize_1_1_state.html">geometrize::State</a> bestState(state);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">float</span> bestEnergy{bestState.m_score};</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    std::uint32_t age{0};</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">while</span>(age &lt; maxAge) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keyword">const</span> <a class="code" href="classgeometrize_1_1_state.html">geometrize::State</a> undo{s.<a class="code" href="classgeometrize_1_1_state.html#a69cee4399c3599e6a6b3e9f039d3193b">mutate</a>()};</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1">energy</a>{s.calculateEnergy(target, current, buffer, lastScore)};</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1">energy</a> &gt;= bestEnergy) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            s = undo;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            bestEnergy = <a class="code" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1">energy</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            bestState = s;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            age = -1;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        age++;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> bestState;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div><div class="ttc" id="namespacegeometrize_1_1core_html_a4bbe866fe6ad978a443b4792f1353af1"><div class="ttname"><a href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1">geometrize::core::energy</a></div><div class="ttdeci">float energy(const std::vector&lt; geometrize::Scanline &gt; &amp;lines, const std::uint32_t alpha, const geometrize::Bitmap &amp;target, const geometrize::Bitmap &amp;current, geometrize::Bitmap &amp;buffer, const float score)</div><div class="ttdoc">energy Calculates a measure of the improvement adding the scanlines of a shape provides - lower energ...</div><div class="ttdef"><b>Definition:</b> core.cpp:205</div></div>
<div class="ttc" id="classgeometrize_1_1_state_html_a69cee4399c3599e6a6b3e9f039d3193b"><div class="ttname"><a href="classgeometrize_1_1_state.html#a69cee4399c3599e6a6b3e9f039d3193b">geometrize::State::mutate</a></div><div class="ttdeci">geometrize::State mutate()</div><div class="ttdoc">mutate Modifies the current state in a random fashion. </div><div class="ttdef"><b>Definition:</b> state.cpp:46</div></div>
<div class="ttc" id="classgeometrize_1_1_state_html"><div class="ttname"><a href="classgeometrize_1_1_state.html">geometrize::State</a></div><div class="ttdoc">The State class relates a shape and related properties to a measure of how close it brings the workin...</div><div class="ttdef"><b>Definition:</b> state.h:22</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_ac2f92c9b8315a53321df14fa3cf2d9a9_cgraph.png" border="0" usemap="#namespacegeometrize_1_1core_ac2f92c9b8315a53321df14fa3cf2d9a9_cgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_ac2f92c9b8315a53321df14fa3cf2d9a9_cgraph" id="namespacegeometrize_1_1core_ac2f92c9b8315a53321df14fa3cf2d9a9_cgraph">
<area shape="rect" id="node2" href="classgeometrize_1_1_state.html#a69cee4399c3599e6a6b3e9f039d3193b" title="mutate Modifies the current state in a random fashion. " alt="" coords="229,5,363,47"/>
<area shape="rect" id="node3" href="namespacegeometrize_1_1core.html#a4bbe866fe6ad978a443b4792f1353af1" title="energy Calculates a measure of the improvement adding the scanlines of a shape provides &#45; lower energ..." alt="" coords="411,107,577,134"/>
<area shape="rect" id="node15" href="classgeometrize_1_1_state.html#a63ba05a7fc6449055e09f537828a47fe" title="Calculates a measure of the improvement drawing the primitive to the current bitmap will have..." alt="" coords="229,71,363,112"/>
<area shape="rect" id="node4" href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220" title="computeColor Calculates the color of the scanlines. " alt="" coords="628,129,805,171"/>
<area shape="rect" id="node9" href="namespacegeometrize.html#acb0746647a6799ff26ec1405ee927f78" title="copyLines Copies source pixels to a destination defined by a set of scanlines. " alt="" coords="640,27,793,54"/>
<area shape="rect" id="node11" href="namespacegeometrize.html#a8235efcd62ef6bd0478d8fa9dd6df034" title="drawLines Draws scanlines onto an image. " alt="" coords="641,78,793,105"/>
<area shape="rect" id="node12" href="namespacegeometrize_1_1core.html#a421d9870e9e49b517b60bce228659878" title="differencePartial Calculates the root&#45;mean&#45;square error between the parts of the two bitmaps within t..." alt="" coords="625,197,808,239"/>
<area shape="rect" id="node5" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value. " alt="" coords="869,71,1004,112"/>
<area shape="rect" id="node6" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a" title="clamp Clamps a value within a range. " alt="" coords="856,136,1017,177"/>
<area shape="rect" id="node7" href="namespacegeometrize_1_1commonutil.html#a4bd394bcd9de4e09ef50947064dd9313" title="getAverageImageColor Computes the average RGB color of the pixels in the bitmap. " alt="" coords="1065,136,1227,177"/>
<area shape="rect" id="node8" href="classgeometrize_1_1_bitmap.html#a609d9019da733929eb9d2f707254c19a" title="getDataRef Gets a reference to the raw bitmap data. " alt="" coords="1275,136,1409,177"/>
<area shape="rect" id="node10" href="classgeometrize_1_1_bitmap.html#aa5b22e648397f07c4d7fa44b464d9f64" title="setPixel Sets a pixel color value. " alt="" coords="869,5,1004,47"/>
<area shape="rect" id="node13" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55" title="getWidth Gets the width of the bitmap. " alt="" coords="869,267,1004,308"/>
<area shape="rect" id="node14" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c" title="getHeight Gets the height of the bitmap. " alt="" coords="869,201,1004,243"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_ac2f92c9b8315a53321df14fa3cf2d9a9_icgraph.png" border="0" usemap="#namespacegeometrize_1_1core_ac2f92c9b8315a53321df14fa3cf2d9a9_icgraph" alt=""/></div>
<map name="namespacegeometrize_1_1core_ac2f92c9b8315a53321df14fa3cf2d9a9_icgraph" id="namespacegeometrize_1_1core_ac2f92c9b8315a53321df14fa3cf2d9a9_icgraph">
<area shape="rect" id="node2" href="namespacegeometrize_1_1core.html#a54c591239a4618069f126dcc818db9f3" title="bestHillClimbState Gets the best state using a hill climbing algorithm. " alt="" coords="229,5,400,47"/>
<area shape="rect" id="node3" href="classgeometrize_1_1_model_1_1_model_impl.html#ae1666701e21be2c2a7d4b57ebbc31fb4" title="geometrize::Model::\lModelImpl::getHillClimbState" alt="" coords="448,5,637,47"/>
<area shape="rect" id="node4" href="classgeometrize_1_1_model_1_1_model_impl.html#a1c443627e2c315681a081ad5114e0424" title="geometrize::Model::\lModelImpl::step" alt="" coords="685,5,823,47"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 20 2017 18:48:21 for Geometrize by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
