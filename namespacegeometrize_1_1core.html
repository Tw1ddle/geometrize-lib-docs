<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geometrize: geometrize::core Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">Geometrize<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">C++ library for geometrizing images into geometric primitives</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegeometrize.html">geometrize</a></li><li class="navelem"><a class="el" href="namespacegeometrize_1_1core.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">geometrize::core Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a32c32a68cc462cb980fbf116f79ef15c"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#a32c32a68cc462cb980fbf116f79ef15c">EnergyFunction</a> = std::function&lt; double(const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a> &gt; &amp;lines, const std::uint32_t alpha, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;current, <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;buffer, double score)&gt;</td></tr>
<tr class="memdesc:a32c32a68cc462cb980fbf116f79ef15c"><td class="mdescLeft">&#160;</td><td class="mdescRight">EnergyFunction Type alias for a function that calculates a measure of the improvement adding the scanlines of a shape provides - lower energy is better.  <a href="namespacegeometrize_1_1core.html#a32c32a68cc462cb980fbf116f79ef15c">More...</a><br /></td></tr>
<tr class="separator:a32c32a68cc462cb980fbf116f79ef15c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa18ba66272842344be92e461471ae79c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#aa18ba66272842344be92e461471ae79c">defaultEnergyFunction</a> (const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a> &gt; &amp;lines, const std::uint32_t alpha, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;current, <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;buffer, double score)</td></tr>
<tr class="memdesc:aa18ba66272842344be92e461471ae79c"><td class="mdescLeft">&#160;</td><td class="mdescRight">defaultEnergyFunction The default/built-in energy function that calculates a measure of the improvement adding the scanlines of a shape provides - lower energy is better.  <a href="namespacegeometrize_1_1core.html#aa18ba66272842344be92e461471ae79c">More...</a><br /></td></tr>
<tr class="separator:aa18ba66272842344be92e461471ae79c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b3c5f53664cf0a84fc1e789a24fd220"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgeometrize_1_1rgba.html">geometrize::rgba</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220">computeColor</a> (const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;current, const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a> &gt; &amp;lines, std::uint8_t alpha)</td></tr>
<tr class="memdesc:a9b3c5f53664cf0a84fc1e789a24fd220"><td class="mdescLeft">&#160;</td><td class="mdescRight">computeColor Calculates the color of the scanlines.  <a href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220">More...</a><br /></td></tr>
<tr class="separator:a9b3c5f53664cf0a84fc1e789a24fd220"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b3c06b7ce98153efba417917ba7c6ed"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#a8b3c06b7ce98153efba417917ba7c6ed">differenceFull</a> (const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;first, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;second)</td></tr>
<tr class="memdesc:a8b3c06b7ce98153efba417917ba7c6ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">differenceFull Calculates the root-mean-square error between two bitmaps.  <a href="namespacegeometrize_1_1core.html#a8b3c06b7ce98153efba417917ba7c6ed">More...</a><br /></td></tr>
<tr class="separator:a8b3c06b7ce98153efba417917ba7c6ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab240d6154564e23772657e408b2775b3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#ab240d6154564e23772657e408b2775b3">differencePartial</a> (const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;before, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;after, double score, const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">Scanline</a> &gt; &amp;lines)</td></tr>
<tr class="memdesc:ab240d6154564e23772657e408b2775b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">differencePartial Calculates the root-mean-square error between the parts of the two bitmaps within the scanline mask. This is for optimization purposes, it lets us calculate new error values only for parts of the image we know have changed.  <a href="namespacegeometrize_1_1core.html#ab240d6154564e23772657e408b2775b3">More...</a><br /></td></tr>
<tr class="separator:ab240d6154564e23772657e408b2775b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae526811239eef4bf30391c951afed129"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgeometrize_1_1_state.html">geometrize::State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegeometrize_1_1core.html#ae526811239eef4bf30391c951afed129">bestHillClimbState</a> (const std::function&lt; std::shared_ptr&lt; <a class="el" href="classgeometrize_1_1_shape.html">geometrize::Shape</a> &gt;(void)&gt; &amp;shapeCreator, std::uint32_t alpha, std::uint32_t n, std::uint32_t age, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;current, <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;buffer, double lastScore, const <a class="el" href="namespacegeometrize_1_1core.html#a32c32a68cc462cb980fbf116f79ef15c">EnergyFunction</a> &amp;customEnergyFunction=nullptr)</td></tr>
<tr class="memdesc:ae526811239eef4bf30391c951afed129"><td class="mdescLeft">&#160;</td><td class="mdescRight">bestHillClimbState Gets the best state using a hill climbing algorithm.  <a href="namespacegeometrize_1_1core.html#ae526811239eef4bf30391c951afed129">More...</a><br /></td></tr>
<tr class="separator:ae526811239eef4bf30391c951afed129"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a32c32a68cc462cb980fbf116f79ef15c" name="a32c32a68cc462cb980fbf116f79ef15c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32c32a68cc462cb980fbf116f79ef15c">&#9670;&nbsp;</a></span>EnergyFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacegeometrize_1_1core.html#a32c32a68cc462cb980fbf116f79ef15c">geometrize::core::EnergyFunction</a> = typedef std::function&lt;double( const std::vector&lt;<a class="el" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a>&gt;&amp; lines, const std::uint32_t alpha, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a>&amp; target, const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a>&amp; current, <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a>&amp; buffer, double score)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EnergyFunction Type alias for a function that calculates a measure of the improvement adding the scanlines of a shape provides - lower energy is better. </p>
<p >The core functions for Geometrize. </p><dl class="section author"><dt>Author</dt><dd>Sam Twidale (<a href="https://samcodes.co.uk/">https://samcodes.co.uk/</a>) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lines</td><td>The scanlines of the shape. </td></tr>
    <tr><td class="paramname">alpha</td><td>The alpha of the scanlines. </td></tr>
    <tr><td class="paramname">target</td><td>The target bitmap. </td></tr>
    <tr><td class="paramname">current</td><td>The current bitmap. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer bitmap. </td></tr>
    <tr><td class="paramname">score</td><td>The score. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The energy measure. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae526811239eef4bf30391c951afed129" name="ae526811239eef4bf30391c951afed129"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae526811239eef4bf30391c951afed129">&#9670;&nbsp;</a></span>bestHillClimbState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgeometrize_1_1_state.html">geometrize::State</a> geometrize::core::bestHillClimbState </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; std::shared_ptr&lt; <a class="el" href="classgeometrize_1_1_shape.html">geometrize::Shape</a> &gt;(void)&gt; &amp;&#160;</td>
          <td class="paramname"><em>shapeCreator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>age</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lastScore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacegeometrize_1_1core.html#a32c32a68cc462cb980fbf116f79ef15c">EnergyFunction</a> &amp;&#160;</td>
          <td class="paramname"><em>customEnergyFunction</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>bestHillClimbState Gets the best state using a hill climbing algorithm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shapeCreator</td><td>A function that will create the shapes that will be chosen from. </td></tr>
    <tr><td class="paramname">alpha</td><td>The opacity of the shape. </td></tr>
    <tr><td class="paramname">n</td><td>The number of random states to generate. </td></tr>
    <tr><td class="paramname">age</td><td>The number of hillclimbing steps. </td></tr>
    <tr><td class="paramname">target</td><td>The target bitmap. </td></tr>
    <tr><td class="paramname">current</td><td>The current bitmap. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer bitmap. </td></tr>
    <tr><td class="paramname">lastScore</td><td>The last score. </td></tr>
    <tr><td class="paramname">customEnergyFunction</td><td>An optional function to calculate the energy (if unspecified a default implementation is used). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The best state acquired from hill climbing i.e. the one with the lowest energy. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  243</span>{</div>
<div class="line"><span class="lineno">  244</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespacegeometrize_1_1core.html#a32c32a68cc462cb980fbf116f79ef15c">EnergyFunction</a>&amp; e = customEnergyFunction ? customEnergyFunction : <a class="code hl_function" href="namespacegeometrize_1_1core.html#aa18ba66272842344be92e461471ae79c">geometrize::core::defaultEnergyFunction</a>;</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>    <span class="keyword">const</span> <a class="code hl_class" href="classgeometrize_1_1_state.html">geometrize::State</a> state{bestRandomState(shapeCreator, alpha, n, target, current, buffer, lastScore, e)};</div>
<div class="line"><span class="lineno">  247</span>    return ::hillClimb(state, age, target, current, buffer, lastScore, e);</div>
<div class="line"><span class="lineno">  248</span>}</div>
<div class="ttc" id="aclassgeometrize_1_1_state_html"><div class="ttname"><a href="classgeometrize_1_1_state.html">geometrize::State</a></div><div class="ttdoc">The State class relates a shape and related properties to a measure of how close it brings the workin...</div><div class="ttdef"><b>Definition:</b> state.h:21</div></div>
<div class="ttc" id="anamespacegeometrize_1_1core_html_a32c32a68cc462cb980fbf116f79ef15c"><div class="ttname"><a href="namespacegeometrize_1_1core.html#a32c32a68cc462cb980fbf116f79ef15c">geometrize::core::EnergyFunction</a></div><div class="ttdeci">std::function&lt; double(const std::vector&lt; geometrize::Scanline &gt; &amp;lines, const std::uint32_t alpha, const geometrize::Bitmap &amp;target, const geometrize::Bitmap &amp;current, geometrize::Bitmap &amp;buffer, double score)&gt; EnergyFunction</div><div class="ttdoc">EnergyFunction Type alias for a function that calculates a measure of the improvement adding the scan...</div><div class="ttdef"><b>Definition:</b> core.h:44</div></div>
<div class="ttc" id="anamespacegeometrize_1_1core_html_aa18ba66272842344be92e461471ae79c"><div class="ttname"><a href="namespacegeometrize_1_1core.html#aa18ba66272842344be92e461471ae79c">geometrize::core::defaultEnergyFunction</a></div><div class="ttdeci">double defaultEnergyFunction(const std::vector&lt; geometrize::Scanline &gt; &amp;lines, const std::uint32_t alpha, const geometrize::Bitmap &amp;target, const geometrize::Bitmap &amp;current, geometrize::Bitmap &amp;buffer, const double score)</div><div class="ttdoc">defaultEnergyFunction The default/built-in energy function that calculates a measure of the improveme...</div><div class="ttdef"><b>Definition:</b> core.cpp:108</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_ae526811239eef4bf30391c951afed129_cgraph.png" border="0" usemap="#anamespacegeometrize_1_1core_ae526811239eef4bf30391c951afed129_cgraph" alt=""/></div>
<map name="anamespacegeometrize_1_1core_ae526811239eef4bf30391c951afed129_cgraph" id="anamespacegeometrize_1_1core_ae526811239eef4bf30391c951afed129_cgraph">
<area shape="rect" title="bestHillClimbState Gets the best state using a hill climbing algorithm." alt="" coords="5,111,196,152"/>
<area shape="rect" href="namespacegeometrize_1_1core.html#aa18ba66272842344be92e461471ae79c" title="defaultEnergyFunction The default/built&#45;in energy function that calculates a measure of the improveme..." alt="" coords="244,111,431,152"/>
<area shape="rect" href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220" title="computeColor Calculates the color of the scanlines." alt="" coords="483,27,680,68"/>
<area shape="rect" href="namespacegeometrize.html#acb0746647a6799ff26ec1405ee927f78" title="copyLines Copies source pixels to a destination defined by a set of scanlines." alt="" coords="497,93,666,119"/>
<area shape="rect" href="namespacegeometrize_1_1core.html#ab240d6154564e23772657e408b2775b3" title="differencePartial Calculates the root&#45;mean&#45;square error between the parts of the two bitmaps within t..." alt="" coords="479,197,684,239"/>
<area shape="rect" href="namespacegeometrize.html#a8235efcd62ef6bd0478d8fa9dd6df034" title="drawLines Draws scanlines onto an image." alt="" coords="496,143,667,170"/>
<area shape="rect" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a" title="clamp Clamps a value within a range." alt="" coords="732,5,915,47"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value." alt="" coords="748,136,899,177"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#aa5b22e648397f07c4d7fa44b464d9f64" title="setPixel Sets a pixel color value." alt="" coords="748,71,899,112"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c" title="getHeight Gets the height of the bitmap." alt="" coords="748,267,899,308"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55" title="getWidth Gets the width of the bitmap." alt="" coords="748,201,899,243"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_ae526811239eef4bf30391c951afed129_icgraph.png" border="0" usemap="#anamespacegeometrize_1_1core_ae526811239eef4bf30391c951afed129_icgraph" alt=""/></div>
<map name="anamespacegeometrize_1_1core_ae526811239eef4bf30391c951afed129_icgraph" id="anamespacegeometrize_1_1core_ae526811239eef4bf30391c951afed129_icgraph">
<area shape="rect" title="bestHillClimbState Gets the best state using a hill climbing algorithm." alt="" coords="468,5,659,47"/>
<area shape="rect" href="classgeometrize_1_1_model_1_1_model_impl.html#a77eafc18e18103c143d550632c62dfb1" title=" " alt="" coords="205,5,420,47"/>
<area shape="rect" href="classgeometrize_1_1_model_1_1_model_impl.html#aaebc9fc36880a499ae2f1b22e3609858" title=" " alt="" coords="5,5,157,47"/>
</map>
</div>

</div>
</div>
<a id="a9b3c5f53664cf0a84fc1e789a24fd220" name="a9b3c5f53664cf0a84fc1e789a24fd220"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b3c5f53664cf0a84fc1e789a24fd220">&#9670;&nbsp;</a></span>computeColor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> geometrize::core::computeColor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint8_t&#160;</td>
          <td class="paramname"><em>alpha</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>computeColor Calculates the color of the scanlines. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target image. </td></tr>
    <tr><td class="paramname">current</td><td>The current image. </td></tr>
    <tr><td class="paramname">lines</td><td>The scanlines. </td></tr>
    <tr><td class="paramname">alpha</td><td>The alpha of the scanline. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The color of the scanlines. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  127</span>{</div>
<div class="line"><span class="lineno">  128</span>    <span class="comment">// Early out to avoid integer divide by 0</span></div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">if</span>(lines.empty()) {</div>
<div class="line"><span class="lineno">  130</span>        <span class="keywordflow">return</span> <a class="code hl_struct" href="structgeometrize_1_1rgba.html">geometrize::rgba</a>{0, 0, 0, 0};</div>
<div class="line"><span class="lineno">  131</span>    }</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    std::int64_t totalRed{0};</div>
<div class="line"><span class="lineno">  134</span>    std::int64_t totalGreen{0};</div>
<div class="line"><span class="lineno">  135</span>    std::int64_t totalBlue{0};</div>
<div class="line"><span class="lineno">  136</span>    std::int64_t count{0};</div>
<div class="line"><span class="lineno">  137</span>    <span class="keyword">const</span> std::int32_t a{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(257.0f * 255.0f / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(alpha))};</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    <span class="comment">// For each scanline</span></div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code hl_class" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a>&amp; line : lines) {</div>
<div class="line"><span class="lineno">  141</span>        <span class="keyword">const</span> std::int32_t y{line.y};</div>
<div class="line"><span class="lineno">  142</span>        <span class="keywordflow">for</span>(std::int32_t x = line.x1; x &lt;= line.x2; x++) {</div>
<div class="line"><span class="lineno">  143</span>            <span class="comment">// Get the overlapping target and current colors</span></div>
<div class="line"><span class="lineno">  144</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> t(target.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y));</div>
<div class="line"><span class="lineno">  145</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> c(current.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y));</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>            <span class="keyword">const</span> std::int32_t tr{t.r};</div>
<div class="line"><span class="lineno">  148</span>            <span class="keyword">const</span> std::int32_t tg{t.g};</div>
<div class="line"><span class="lineno">  149</span>            <span class="keyword">const</span> std::int32_t tb{t.b};</div>
<div class="line"><span class="lineno">  150</span>            <span class="keyword">const</span> std::int32_t cr{c.r};</div>
<div class="line"><span class="lineno">  151</span>            <span class="keyword">const</span> std::int32_t cg{c.g};</div>
<div class="line"><span class="lineno">  152</span>            <span class="keyword">const</span> std::int32_t cb{c.b};</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>            <span class="comment">// Mix the red, green and blue components, blending by the given alpha value</span></div>
<div class="line"><span class="lineno">  155</span>            totalRed += <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>((tr - cr) * a + cr * 257);</div>
<div class="line"><span class="lineno">  156</span>            totalGreen += <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>((tg - cg) * a + cg * 257);</div>
<div class="line"><span class="lineno">  157</span>            totalBlue += <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>((tb - cb) * a + cb * 257);</div>
<div class="line"><span class="lineno">  158</span>            count++;</div>
<div class="line"><span class="lineno">  159</span>        }</div>
<div class="line"><span class="lineno">  160</span>    }</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    <span class="keyword">const</span> std::int32_t rr{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(totalRed / count) &gt;&gt; 8};</div>
<div class="line"><span class="lineno">  163</span>    <span class="keyword">const</span> std::int32_t gg{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(totalGreen / count) &gt;&gt; 8};</div>
<div class="line"><span class="lineno">  164</span>    <span class="keyword">const</span> std::int32_t bb{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(totalBlue / count) &gt;&gt; 8};</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    <span class="comment">// Scale totals down to 0-255 range and return average blended color</span></div>
<div class="line"><span class="lineno">  167</span>    <span class="keyword">const</span> std::uint8_t r{<span class="keyword">static_cast&lt;</span>std::uint8_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a">commonutil::clamp</a>(rr, INT32_C(0), INT32_C(255)))};</div>
<div class="line"><span class="lineno">  168</span>    <span class="keyword">const</span> std::uint8_t g{<span class="keyword">static_cast&lt;</span>std::uint8_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a">commonutil::clamp</a>(gg, INT32_C(0), INT32_C(255)))};</div>
<div class="line"><span class="lineno">  169</span>    <span class="keyword">const</span> std::uint8_t b{<span class="keyword">static_cast&lt;</span>std::uint8_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a">commonutil::clamp</a>(bb, INT32_C(0), INT32_C(255)))};</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="structgeometrize_1_1rgba.html">geometrize::rgba</a>{r, g, b, alpha};</div>
<div class="line"><span class="lineno">  172</span>}</div>
<div class="ttc" id="aclassgeometrize_1_1_bitmap_html_ac79681e7353058d37a677b2c3e488d0c"><div class="ttname"><a href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">geometrize::Bitmap::getPixel</a></div><div class="ttdeci">geometrize::rgba getPixel(std::uint32_t x, std::uint32_t y) const</div><div class="ttdoc">getPixel Gets a pixel color value.</div><div class="ttdef"><b>Definition:</b> bitmap.cpp:40</div></div>
<div class="ttc" id="aclassgeometrize_1_1_scanline_html"><div class="ttname"><a href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a></div><div class="ttdoc">The Scanline class represents a scanline, a row of pixels running across a bitmap.</div><div class="ttdef"><b>Definition:</b> scanline.h:14</div></div>
<div class="ttc" id="anamespacegeometrize_1_1commonutil_html_a31e1f80ca7a55bd9b85dd8c7e8d4196a"><div class="ttname"><a href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a">geometrize::commonutil::clamp</a></div><div class="ttdeci">T clamp(const T &amp;value, const T &amp;lower, const T &amp;upper)</div><div class="ttdoc">clamp Clamps a value within a range.</div><div class="ttdef"><b>Definition:</b> commonutil.h:45</div></div>
<div class="ttc" id="astructgeometrize_1_1rgba_html"><div class="ttname"><a href="structgeometrize_1_1rgba.html">geometrize::rgba</a></div><div class="ttdoc">The rgba struct is a helper for manipulating RGBA8888 color data.</div><div class="ttdef"><b>Definition:</b> rgba.h:13</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_cgraph.png" border="0" usemap="#anamespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_cgraph" alt=""/></div>
<map name="anamespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_cgraph" id="anamespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_cgraph">
<area shape="rect" title="computeColor Calculates the color of the scanlines." alt="" coords="5,39,203,80"/>
<area shape="rect" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a" title="clamp Clamps a value within a range." alt="" coords="251,5,433,47"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value." alt="" coords="267,71,417,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_icgraph.png" border="0" usemap="#anamespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_icgraph" alt=""/></div>
<map name="anamespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_icgraph" id="anamespacegeometrize_1_1core_a9b3c5f53664cf0a84fc1e789a24fd220_icgraph">
<area shape="rect" title="computeColor Calculates the color of the scanlines." alt="" coords="941,35,1139,76"/>
<area shape="rect" href="namespacegeometrize_1_1core.html#aa18ba66272842344be92e461471ae79c" title="defaultEnergyFunction The default/built&#45;in energy function that calculates a measure of the improveme..." alt="" coords="707,5,893,47"/>
<area shape="rect" href="classgeometrize_1_1_model_1_1_model_impl.html#aaebc9fc36880a499ae2f1b22e3609858" title=" " alt="" coords="5,35,157,76"/>
<area shape="rect" href="namespacegeometrize_1_1core.html#ae526811239eef4bf30391c951afed129" title="bestHillClimbState Gets the best state using a hill climbing algorithm." alt="" coords="468,5,659,47"/>
<area shape="rect" href="classgeometrize_1_1_model_1_1_model_impl.html#a77eafc18e18103c143d550632c62dfb1" title=" " alt="" coords="205,5,420,47"/>
</map>
</div>

</div>
</div>
<a id="aa18ba66272842344be92e461471ae79c" name="aa18ba66272842344be92e461471ae79c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa18ba66272842344be92e461471ae79c">&#9670;&nbsp;</a></span>defaultEnergyFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double geometrize::core::defaultEnergyFunction </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::uint32_t&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>defaultEnergyFunction The default/built-in energy function that calculates a measure of the improvement adding the scanlines of a shape provides - lower energy is better. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lines</td><td>The scanlines of the shape. </td></tr>
    <tr><td class="paramname">alpha</td><td>The alpha of the scanlines. </td></tr>
    <tr><td class="paramname">target</td><td>The target bitmap. </td></tr>
    <tr><td class="paramname">current</td><td>The current bitmap. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer bitmap. </td></tr>
    <tr><td class="paramname">score</td><td>The score. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The energy measure. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  115</span>{</div>
<div class="line"><span class="lineno">  116</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> color(<a class="code hl_function" href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220">geometrize::core::computeColor</a>(target, current, lines, alpha)); <span class="comment">// Calculate best color for areas covered by the scanlines</span></div>
<div class="line"><span class="lineno">  117</span>    <a class="code hl_function" href="namespacegeometrize.html#acb0746647a6799ff26ec1405ee927f78">geometrize::copyLines</a>(buffer, current, lines); <span class="comment">// Copy area covered by scanlines to buffer bitmap</span></div>
<div class="line"><span class="lineno">  118</span>    <a class="code hl_function" href="namespacegeometrize.html#a8235efcd62ef6bd0478d8fa9dd6df034">geometrize::drawLines</a>(buffer, color, lines); <span class="comment">// Blend scanlines into the buffer using the color calculated earlier</span></div>
<div class="line"><span class="lineno">  119</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacegeometrize_1_1core.html#ab240d6154564e23772657e408b2775b3">geometrize::core::differencePartial</a>(target, current, buffer, score, lines); <span class="comment">// Get error measure between areas of current and modified buffers covered by scanlines</span></div>
<div class="line"><span class="lineno">  120</span>}</div>
<div class="ttc" id="anamespacegeometrize_1_1core_html_a9b3c5f53664cf0a84fc1e789a24fd220"><div class="ttname"><a href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220">geometrize::core::computeColor</a></div><div class="ttdeci">geometrize::rgba computeColor(const geometrize::Bitmap &amp;target, const geometrize::Bitmap &amp;current, const std::vector&lt; geometrize::Scanline &gt; &amp;lines, const std::uint8_t alpha)</div><div class="ttdoc">computeColor Calculates the color of the scanlines.</div><div class="ttdef"><b>Definition:</b> core.cpp:122</div></div>
<div class="ttc" id="anamespacegeometrize_1_1core_html_ab240d6154564e23772657e408b2775b3"><div class="ttname"><a href="namespacegeometrize_1_1core.html#ab240d6154564e23772657e408b2775b3">geometrize::core::differencePartial</a></div><div class="ttdeci">double differencePartial(const geometrize::Bitmap &amp;target, const geometrize::Bitmap &amp;before, const geometrize::Bitmap &amp;after, const double score, const std::vector&lt; Scanline &gt; &amp;lines)</div><div class="ttdoc">differencePartial Calculates the root-mean-square error between the parts of the two bitmaps within t...</div><div class="ttdef"><b>Definition:</b> core.cpp:198</div></div>
<div class="ttc" id="anamespacegeometrize_html_a8235efcd62ef6bd0478d8fa9dd6df034"><div class="ttname"><a href="namespacegeometrize.html#a8235efcd62ef6bd0478d8fa9dd6df034">geometrize::drawLines</a></div><div class="ttdeci">void drawLines(geometrize::Bitmap &amp;image, const geometrize::rgba color, const std::vector&lt; geometrize::Scanline &gt; &amp;lines)</div><div class="ttdoc">drawLines Draws scanlines onto an image.</div><div class="ttdef"><b>Definition:</b> rasterizer.cpp:74</div></div>
<div class="ttc" id="anamespacegeometrize_html_acb0746647a6799ff26ec1405ee927f78"><div class="ttname"><a href="namespacegeometrize.html#acb0746647a6799ff26ec1405ee927f78">geometrize::copyLines</a></div><div class="ttdeci">void copyLines(geometrize::Bitmap &amp;destination, const geometrize::Bitmap &amp;source, const std::vector&lt; geometrize::Scanline &gt; &amp;lines)</div><div class="ttdoc">copyLines Copies source pixels to a destination defined by a set of scanlines.</div><div class="ttdef"><b>Definition:</b> rasterizer.cpp:112</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_aa18ba66272842344be92e461471ae79c_cgraph.png" border="0" usemap="#anamespacegeometrize_1_1core_aa18ba66272842344be92e461471ae79c_cgraph" alt=""/></div>
<map name="anamespacegeometrize_1_1core_aa18ba66272842344be92e461471ae79c_cgraph" id="anamespacegeometrize_1_1core_aa18ba66272842344be92e461471ae79c_cgraph">
<area shape="rect" title="defaultEnergyFunction The default/built&#45;in energy function that calculates a measure of the improveme..." alt="" coords="5,111,192,152"/>
<area shape="rect" href="namespacegeometrize_1_1core.html#a9b3c5f53664cf0a84fc1e789a24fd220" title="computeColor Calculates the color of the scanlines." alt="" coords="244,27,441,68"/>
<area shape="rect" href="namespacegeometrize.html#acb0746647a6799ff26ec1405ee927f78" title="copyLines Copies source pixels to a destination defined by a set of scanlines." alt="" coords="258,93,427,119"/>
<area shape="rect" href="namespacegeometrize_1_1core.html#ab240d6154564e23772657e408b2775b3" title="differencePartial Calculates the root&#45;mean&#45;square error between the parts of the two bitmaps within t..." alt="" coords="240,197,445,239"/>
<area shape="rect" href="namespacegeometrize.html#a8235efcd62ef6bd0478d8fa9dd6df034" title="drawLines Draws scanlines onto an image." alt="" coords="257,143,428,170"/>
<area shape="rect" href="namespacegeometrize_1_1commonutil.html#a31e1f80ca7a55bd9b85dd8c7e8d4196a" title="clamp Clamps a value within a range." alt="" coords="493,5,676,47"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value." alt="" coords="509,136,660,177"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#aa5b22e648397f07c4d7fa44b464d9f64" title="setPixel Sets a pixel color value." alt="" coords="509,71,660,112"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c" title="getHeight Gets the height of the bitmap." alt="" coords="509,267,660,308"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55" title="getWidth Gets the width of the bitmap." alt="" coords="509,201,660,243"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_aa18ba66272842344be92e461471ae79c_icgraph.png" border="0" usemap="#anamespacegeometrize_1_1core_aa18ba66272842344be92e461471ae79c_icgraph" alt=""/></div>
<map name="anamespacegeometrize_1_1core_aa18ba66272842344be92e461471ae79c_icgraph" id="anamespacegeometrize_1_1core_aa18ba66272842344be92e461471ae79c_icgraph">
<area shape="rect" title="defaultEnergyFunction The default/built&#45;in energy function that calculates a measure of the improveme..." alt="" coords="707,5,893,47"/>
<area shape="rect" href="namespacegeometrize_1_1core.html#ae526811239eef4bf30391c951afed129" title="bestHillClimbState Gets the best state using a hill climbing algorithm." alt="" coords="468,5,659,47"/>
<area shape="rect" href="classgeometrize_1_1_model_1_1_model_impl.html#a77eafc18e18103c143d550632c62dfb1" title=" " alt="" coords="205,5,420,47"/>
<area shape="rect" href="classgeometrize_1_1_model_1_1_model_impl.html#aaebc9fc36880a499ae2f1b22e3609858" title=" " alt="" coords="5,5,157,47"/>
</map>
</div>

</div>
</div>
<a id="a8b3c06b7ce98153efba417917ba7c6ed" name="a8b3c06b7ce98153efba417917ba7c6ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b3c06b7ce98153efba417917ba7c6ed">&#9670;&nbsp;</a></span>differenceFull()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double geometrize::core::differenceFull </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>second</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>differenceFull Calculates the root-mean-square error between two bitmaps. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">first</td><td>The first bitmap. </td></tr>
    <tr><td class="paramname">second</td><td>The second bitmap. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The difference/error measure between the two bitmaps. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  175</span>{</div>
<div class="line"><span class="lineno">  176</span>    assert(first.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">getWidth</a>() == second.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">getWidth</a>());</div>
<div class="line"><span class="lineno">  177</span>    assert(first.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">getHeight</a>() == second.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">getHeight</a>());</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>    <span class="keyword">const</span> std::size_t width{first.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">getWidth</a>()};</div>
<div class="line"><span class="lineno">  180</span>    <span class="keyword">const</span> std::size_t height{first.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">getHeight</a>()};</div>
<div class="line"><span class="lineno">  181</span>    std::uint64_t total{0};</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">for</span>(std::size_t y = 0; y &lt; height; y++) {</div>
<div class="line"><span class="lineno">  184</span>        <span class="keywordflow">for</span>(std::size_t x = 0; x &lt; width; x++) {</div>
<div class="line"><span class="lineno">  185</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> f(first.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y));</div>
<div class="line"><span class="lineno">  186</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> s(second.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y));</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>            <span class="keyword">const</span> std::int32_t dr = {<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(f.r) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(s.r)};</div>
<div class="line"><span class="lineno">  189</span>            <span class="keyword">const</span> std::int32_t dg = {<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(f.g) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(s.g)};</div>
<div class="line"><span class="lineno">  190</span>            <span class="keyword">const</span> std::int32_t db = {<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(f.b) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(s.b)};</div>
<div class="line"><span class="lineno">  191</span>            <span class="keyword">const</span> std::int32_t da = {<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(f.a) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(s.a)};</div>
<div class="line"><span class="lineno">  192</span>            total += (dr * dr + dg * dg + db * db + da * da);</div>
<div class="line"><span class="lineno">  193</span>        }</div>
<div class="line"><span class="lineno">  194</span>    }</div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordflow">return</span> std::sqrt(<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(total) / (<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(width) * <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(height) * 4.0)) / 255.0;</div>
<div class="line"><span class="lineno">  196</span>}</div>
<div class="ttc" id="aclassgeometrize_1_1_bitmap_html_a1fb235e2f98d3b1bffc417a8761a3e4c"><div class="ttname"><a href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">geometrize::Bitmap::getHeight</a></div><div class="ttdeci">std::uint32_t getHeight() const</div><div class="ttdoc">getHeight Gets the height of the bitmap.</div><div class="ttdef"><b>Definition:</b> bitmap.cpp:25</div></div>
<div class="ttc" id="aclassgeometrize_1_1_bitmap_html_a870373372ffd3c860063d7bf76607d55"><div class="ttname"><a href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">geometrize::Bitmap::getWidth</a></div><div class="ttdeci">std::uint32_t getWidth() const</div><div class="ttdoc">getWidth Gets the width of the bitmap.</div><div class="ttdef"><b>Definition:</b> bitmap.cpp:20</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a8b3c06b7ce98153efba417917ba7c6ed_cgraph.png" border="0" usemap="#anamespacegeometrize_1_1core_a8b3c06b7ce98153efba417917ba7c6ed_cgraph" alt=""/></div>
<map name="anamespacegeometrize_1_1core_a8b3c06b7ce98153efba417917ba7c6ed_cgraph" id="anamespacegeometrize_1_1core_a8b3c06b7ce98153efba417917ba7c6ed_cgraph">
<area shape="rect" title="differenceFull Calculates the root&#45;mean&#45;square error between two bitmaps." alt="" coords="5,78,233,105"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c" title="getHeight Gets the height of the bitmap." alt="" coords="281,5,432,47"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value." alt="" coords="281,71,432,112"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55" title="getWidth Gets the width of the bitmap." alt="" coords="281,136,432,177"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_a8b3c06b7ce98153efba417917ba7c6ed_icgraph.png" border="0" usemap="#anamespacegeometrize_1_1core_a8b3c06b7ce98153efba417917ba7c6ed_icgraph" alt=""/></div>
<map name="anamespacegeometrize_1_1core_a8b3c06b7ce98153efba417917ba7c6ed_icgraph" id="anamespacegeometrize_1_1core_a8b3c06b7ce98153efba417917ba7c6ed_icgraph">
<area shape="rect" title="differenceFull Calculates the root&#45;mean&#45;square error between two bitmaps." alt="" coords="205,13,433,39"/>
<area shape="rect" href="classgeometrize_1_1_model_1_1_model_impl.html#a67a5f35db45bfc0e29b481baa87dcf14" title=" " alt="" coords="5,5,157,47"/>
</map>
</div>

</div>
</div>
<a id="ab240d6154564e23772657e408b2775b3" name="ab240d6154564e23772657e408b2775b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab240d6154564e23772657e408b2775b3">&#9670;&nbsp;</a></span>differencePartial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double geometrize::core::differencePartial </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>before</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeometrize_1_1_bitmap.html">geometrize::Bitmap</a> &amp;&#160;</td>
          <td class="paramname"><em>after</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classgeometrize_1_1_scanline.html">Scanline</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lines</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>differencePartial Calculates the root-mean-square error between the parts of the two bitmaps within the scanline mask. This is for optimization purposes, it lets us calculate new error values only for parts of the image we know have changed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target bitmap. </td></tr>
    <tr><td class="paramname">before</td><td>The bitmap before the change. </td></tr>
    <tr><td class="paramname">after</td><td>The bitmap after the change. </td></tr>
    <tr><td class="paramname">score</td><td>The score. </td></tr>
    <tr><td class="paramname">lines</td><td>The scanlines. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The difference/error between the two bitmaps, masked by the scanlines. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  204</span>{</div>
<div class="line"><span class="lineno">  205</span>    <span class="keyword">const</span> std::uint64_t rgbaCount{target.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55">getWidth</a>() * target.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c">getHeight</a>() * 4U};</div>
<div class="line"><span class="lineno">  206</span>    std::uint64_t total{<span class="keyword">static_cast&lt;</span>std::uint64_t<span class="keyword">&gt;</span>((score * 255.0) * (score * 255.0) * rgbaCount)};</div>
<div class="line"><span class="lineno">  207</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code hl_class" href="classgeometrize_1_1_scanline.html">geometrize::Scanline</a>&amp; line : lines) {</div>
<div class="line"><span class="lineno">  208</span>        <span class="keyword">const</span> std::int32_t y{line.y};</div>
<div class="line"><span class="lineno">  209</span>        <span class="keywordflow">for</span>(std::int32_t x = line.x1; x &lt;= line.x2; x++) {</div>
<div class="line"><span class="lineno">  210</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> t(target.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y));</div>
<div class="line"><span class="lineno">  211</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> b(before.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y));</div>
<div class="line"><span class="lineno">  212</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structgeometrize_1_1rgba.html">geometrize::rgba</a> a(after.<a class="code hl_function" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c">getPixel</a>(x, y));</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>            <span class="keyword">const</span> std::int32_t dtbr{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(t.r) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(b.r)};</div>
<div class="line"><span class="lineno">  215</span>            <span class="keyword">const</span> std::int32_t dtbg{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(t.g) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(b.g)};</div>
<div class="line"><span class="lineno">  216</span>            <span class="keyword">const</span> std::int32_t dtbb{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(t.b) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(b.b)};</div>
<div class="line"><span class="lineno">  217</span>            <span class="keyword">const</span> std::int32_t dtba{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(t.a) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(b.a)};</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>            <span class="keyword">const</span> std::int32_t dtar{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(t.r) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(a.r)};</div>
<div class="line"><span class="lineno">  220</span>            <span class="keyword">const</span> std::int32_t dtag{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(t.g) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(a.g)};</div>
<div class="line"><span class="lineno">  221</span>            <span class="keyword">const</span> std::int32_t dtab{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(t.b) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(a.b)};</div>
<div class="line"><span class="lineno">  222</span>            <span class="keyword">const</span> std::int32_t dtaa{<span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(t.a) - <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(a.a)};</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>            total -= <span class="keyword">static_cast&lt;</span>std::uint64_t<span class="keyword">&gt;</span>(dtbr * dtbr + dtbg * dtbg + dtbb * dtbb + dtba * dtba);</div>
<div class="line"><span class="lineno">  225</span>            total += <span class="keyword">static_cast&lt;</span>std::uint64_t<span class="keyword">&gt;</span>(dtar * dtar + dtag * dtag + dtab * dtab + dtaa * dtaa);</div>
<div class="line"><span class="lineno">  226</span>        }</div>
<div class="line"><span class="lineno">  227</span>    }</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> result{std::sqrt(<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(total) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(rgbaCount)) / 255.0};</div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  231</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_ab240d6154564e23772657e408b2775b3_cgraph.png" border="0" usemap="#anamespacegeometrize_1_1core_ab240d6154564e23772657e408b2775b3_cgraph" alt=""/></div>
<map name="anamespacegeometrize_1_1core_ab240d6154564e23772657e408b2775b3_cgraph" id="anamespacegeometrize_1_1core_ab240d6154564e23772657e408b2775b3_cgraph">
<area shape="rect" title="differencePartial Calculates the root&#45;mean&#45;square error between the parts of the two bitmaps within t..." alt="" coords="5,71,211,112"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#a1fb235e2f98d3b1bffc417a8761a3e4c" title="getHeight Gets the height of the bitmap." alt="" coords="259,5,409,47"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#ac79681e7353058d37a677b2c3e488d0c" title="getPixel Gets a pixel color value." alt="" coords="259,71,409,112"/>
<area shape="rect" href="classgeometrize_1_1_bitmap.html#a870373372ffd3c860063d7bf76607d55" title="getWidth Gets the width of the bitmap." alt="" coords="259,136,409,177"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacegeometrize_1_1core_ab240d6154564e23772657e408b2775b3_icgraph.png" border="0" usemap="#anamespacegeometrize_1_1core_ab240d6154564e23772657e408b2775b3_icgraph" alt=""/></div>
<map name="anamespacegeometrize_1_1core_ab240d6154564e23772657e408b2775b3_icgraph" id="anamespacegeometrize_1_1core_ab240d6154564e23772657e408b2775b3_icgraph">
<area shape="rect" title="differencePartial Calculates the root&#45;mean&#45;square error between the parts of the two bitmaps within t..." alt="" coords="941,64,1147,105"/>
<area shape="rect" href="namespacegeometrize_1_1core.html#aa18ba66272842344be92e461471ae79c" title="defaultEnergyFunction The default/built&#45;in energy function that calculates a measure of the improveme..." alt="" coords="707,5,893,47"/>
<area shape="rect" href="classgeometrize_1_1_model_1_1_model_impl.html#aaebc9fc36880a499ae2f1b22e3609858" title=" " alt="" coords="5,35,157,76"/>
<area shape="rect" href="classgeometrize_1_1_model_1_1_model_impl.html#ab8d77fccb4778e9bc60b14c43f705634" title=" " alt="" coords="715,123,885,164"/>
<area shape="rect" href="namespacegeometrize_1_1core.html#ae526811239eef4bf30391c951afed129" title="bestHillClimbState Gets the best state using a hill climbing algorithm." alt="" coords="468,5,659,47"/>
<area shape="rect" href="classgeometrize_1_1_model_1_1_model_impl.html#a77eafc18e18103c143d550632c62dfb1" title=" " alt="" coords="205,5,420,47"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 18 2022 07:36:41 for Geometrize by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
